input {
  beats {
    port => 5044
  }
}

filter {
  # Example: Parsing JSON logs
  if [docker] {
    json {
      source => "message"
      target => "json_message"
      remove_field => ["message"]
    }
  }

  # Example: Adding custom fields or tags
  mutate {
    add_field => {
      "logsource" => "%{[docker][container][name]}"
    }
    remove_field => ["[docker][container][id]"]
  }
}

output {
  elasticsearch {
    hosts => ["http://elasticsearch:9200"]
    index => "logstash-logs-%{+YYYY.MM.dd}"
  }

  # Optional: Output logs to stdout for debugging
  # stdout {
  #   codec => rubydebug
  # }
}
